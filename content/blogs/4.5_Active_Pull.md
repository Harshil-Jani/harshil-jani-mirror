+++
title="[Spice-05] : Active Pull Circuits"
date=2023-01-26
draft=false
[taxonomies]
tags=["Vlsi", "Spice", "Electronics","Circuit","Core"]
+++

From the VTC Noise Margin curve which we got in SPICE-03. One important Observation which we can draw is that, 
- On increasing the value of Rc , The Curve becomes Stepper. 
- In other terms, V(IH) Decreases. 
- Noise Margin of Logic High Improves. 
- We get more Fan-Out. 
![Image](https://user-images.githubusercontent.com/79367883/214822033-47614f35-10a0-4284-8fcd-9f9fc740c326.png)

This makes one thing very clear that, Increasing the Rc will help us to design more robust Logical Circuit. 
There are several reasons why the Rc (collector-to-emitter resistance) in a RTL circuit cannot be increased above a certain limit. Some of the main reasons include:

1. Power dissipation: As Rc increases, more power is dissipated in the collector-emitter path, leading to increased heat generation and a higher risk of thermal damage to the circuit.
2. Gain reduction: The gain of the circuit is directly proportional to Rc. As Rc increases, the gain of the circuit decreases, making it less sensitive to input signals.
3. Bandwidth reduction: The bandwidth of the circuit is inversely proportional to Rc. As Rc increases, the bandwidth of the circuit decreases, making it less responsive to high-frequency input signals.
4. Increased noise: As Rc increases, the amount of noise generated by the circuit also increases, which can degrade the overall performance of the circuit.
5. Biasing: As Rc increases, the circuit's bias point can become unstable, and it may not work correctly.

Hence, there is a trade-off between the gain and stability of the circuit, and the designer has to balance this trade-off while selecting the value of Rc.

> An active pull-up circuit can be used to help increase the Rc limit in  circuit by providing a stronger pull-up current. It uses an active device, such as a transistor, to provide a stronger pull-up current than a passive pull-up resistor. This stronger pull-up current can help to overcome the limitations of a passive pull-up resistor, such as a limited current-carrying capacity or a limited voltage swing. Additionally, an active pull-up circuit can also be used to provide additional functionality, such as the ability to control the pull-up current with an external signal, which can be useful in certain applications.

## Active Pull Up RTL Inverter


![Image](https://user-images.githubusercontent.com/79367883/214826996-7c64e7c2-91fa-40ea-8537-55238355cf23.png)

Here, Out output is connected between the Transistors which are active elements. By Observing the circuit, We can say that 
- When V(IN) is high, I(c) would flow towards Q(s) leavning Q(p) OFF. Also, Q(o) will always be in the state where Q(s) would be. So, V(out) would be equal to V(CE sat Qo).
- When V(IN) is low, I(c) would flow towards Q(p) and this would turn it ON.

| Vin | Q(s) | Q(o) | Q(p)|V(out)|
|---|---|---|---|---|
|High|ON|ON|OFF|V(CE sat Qo)|
|Low|OFF|OFF|ON|V(cc)-I(cp)*R(cp)-V(CE sat Qp)|

The netlist for the circuit is 
```markdown
.title Active Pull Inverter
.model BJT NPN
Vcc 1 0 5
Rc 2 1 10k
Qs 2 3 0 BJT
Rbs 3 4 1k
Vin 4 0 5
Rbo 4 5 1k
Qo 6 5 0  BJT
Qp 8 7 6 BJT 
Rbp 7 2 100
Rcp 8 1 10k
```

The whole point of adding this active pull was to improve the Fan out and Noise Margin. We can see that out V(IH) has decreased by a considerable amount with a very nominal resistor value which is only around 10k. 
![Image](https://user-images.githubusercontent.com/79367883/214833505-8e35935f-be9a-4ae8-9430-9c207f66325d.png)

Now, For Fan Out, We can apply KVL and KCL 
- The current going in from node 4 to 3 and 4 to 5 would sum up for giving Current at Output terminal. <br>
`I(out) = N [ I'(Bs)+I'(Bos) ]`.
- Now the equations of I(out) , I'(Bs) and I'(Bos) are given as :<br>

I(out) = $\frac{V(cc)-I(cp)*Rcp-V(CE sat Qp)-V(out)}{Rcp}$

I'(Bs) = $\frac{V(out)-V(BE sat Qs)}{Rb}$

I'(Bos) = $\frac{V(out)-V(BE sat Qo)}{Rbo}$

Putting it in general equation above and re-arranging the terms we will get,

N = $\frac{Rb*Rbo[V(cc)-I(cp)*Rcp-V(CE sat Qp)-V(out)]}{Rcp[Rbo[V(out)-V(BE sat Qs)]+Rb[V(out)-V(BE sat Qo)]]}$

Replace `Vout with V(IH)` to find the maximum safe number of drivers that we can connect. 

In NGSPICE, The netlist of equivalent subcircuit designed for the above main circuit with active pull would be as given below.
```markdown
.subckt NOT 12 9 14 0 
Rcs 10 9 10k
Qss 10 11 0 BJT
Rbss 11 12 1k
Rbos 12 13 1k
Qos 14 13 0  BJT
Qps 16 15 14 BJT 
Rbps 15 10 100
Rcps 16 9 10k
.ends
```

> An active pull-up circuit typically has a higher fan out than a passive pull-up circuit.

>An active pull-up circuit uses a buffer or a transistor to provide a stronger output signal and can drive more inputs without a significant degradation of the signal. A passive pull-up circuit uses only a resistor to provide a weaker output signal and can drive fewer inputs without a significant degradation of the signal.

> Active pull-up circuits are able to source more current than passive pull-up circuits. This allows active pull-up circuits to drive more inputs without degrading the signal, resulting in a higher fan out.